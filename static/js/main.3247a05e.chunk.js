(this["webpackJsonplibrary-react"]=this["webpackJsonplibrary-react"]||[]).push([[0],{13:function(e,t,a){},14:function(e,t,a){"use strict";a.r(t);var o=a(0),n=a.n(o),r=a(7),i=a.n(r),s=a(5),u=a(1),l=a(2),c=a(4),m=a(3);a(13);function d(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement("form",{className:"edit-form",onSubmit:function(t){t.preventDefault(),e.editFormSubmit(t)}},n.a.createElement("input",{type:"text",name:"title",required:!0,defaultValue:e.bookInfo.title}),n.a.createElement("input",{type:"text",name:"author",required:!0,defaultValue:e.bookInfo.author}),n.a.createElement("input",{type:"text",name:"pages",minLength:"1",maxLength:"5",required:!0,defaultValue:e.bookInfo.pages}),n.a.createElement("input",{type:"submit",value:"Save"})))}function b(e){return n.a.createElement("div",{className:"book-info"},n.a.createElement("button",{id:"edit-button",onClick:e.editBook},"Edit"),e.editScreen&&n.a.createElement(d,{editFormSubmit:e.editFormSubmit,bookInfo:e.bookInfo}),n.a.createElement("h3",null,e.bookInfo.title),n.a.createElement("h3",null,"by ",e.bookInfo.author),n.a.createElement("h3",null,"Pages:",e.bookInfo.pages),n.a.createElement("div",{className:"delete-div"},n.a.createElement("i",{onClick:e.deleteBook},"x")))}var h=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var o;return Object(u.a)(this,a),(o=t.call(this,e)).showInfo=function(){o.setState({showInfo:!o.state.showInfo})},o.editScreen=function(){o.setState({editScreen:!o.state.editScreen})},o.editFormSubmit=function(e){o.editScreen(),o.props.editFormSubmit(e)},o.state={showInfo:!1,editScreen:!1},o}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.bookInfo.isRead;return n.a.createElement("div",{className:"book"},n.a.createElement("div",{className:"book-cover",style:{backgroundImage:"url(".concat(this.props.bookInfo.cover,")")}},this.state.showInfo&&n.a.createElement(b,{editFormSubmit:this.editFormSubmit,editScreen:this.state.editScreen,editBook:this.editScreen,deleteBook:this.props.deleteBook,bookInfo:this.props.bookInfo})),n.a.createElement("div",{className:"button-group"},n.a.createElement("button",{onClick:this.showInfo,id:"info-button"},"i"),n.a.createElement("button",{onClick:this.props.changeReadStatus,id:"read-button",style:{backgroundColor:e?"darkorange":"darkgrey"}},e?"Read":"Not Read")))}}]),a}(n.a.Component);function f(e){var t=this,a=e.library.map((function(a,o){return n.a.createElement(h,{editFormSubmit:e.editFormSubmit.bind(t,o),bookInfo:a,key:o,deleteBook:e.deleteBook.bind(t,o),changeReadStatus:e.changeReadStatus.bind(t,o)})}));return n.a.createElement("div",{className:"container"},a)}var k=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var o;return Object(u.a)(this,a),(o=t.call(this,e)).inputHandler=function(e){o.setState({value:e.target.value})},o.state={value:""},o.baseState=o.state,o.val=o.state.value,o}return Object(l.a)(a,[{key:"submitForm",value:function(e){e.preventDefault(),this.props.addBook(this.state.value),this.setState({value:this.baseState.value})}},{key:"render",value:function(){return n.a.createElement("form",{id:"new-book-form",onSubmit:this.submitForm.bind(this)},n.a.createElement("label",{htmlFor:"newBook"},this.props.error," "),n.a.createElement("div",{className:"new-book-input"},n.a.createElement("input",{id:"newBook",type:"text",name:"newBook",value:this.state.value,onChange:this.inputHandler,placeholder:"Enter book's full title"}),n.a.createElement("input",{type:"submit",name:"newBook",value:"Add"})))}}]),a}(n.a.Component),p=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var o;return Object(u.a)(this,a),(o=t.call(this,e)).editFormSubmit=function(e,t){var a=o.state.library.map((function(a,o){return e===o&&(a.title=t.target.title.value,a.author=t.target.author.value,a.pages=t.target.pages.value),a}));o.setState({library:Object(s.a)(a)})},o.addBook=function(e){var t;e.length>=3&&fetch("https://www.googleapis.com/books/v1/volumes?&fields=items(volumeInfo(title,authors,pageCount,imageLinks(thumbnail)))&q=".concat(e,"&maxResults=1&key=").concat(o.googleBooks)).then((function(e){e.json().then((function(e){t=e.items[0].volumeInfo,o.state.library.find((function(e){return e.title===t.title}))?(o.setState({error:"You already added this book"}),setTimeout((function(){o.setState({error:""})}),3e3)):o.setState({library:[{isRead:!1,title:t.title,author:t.authors?t.authors.toString():"unknown",pages:t.pageCount?t.pageCount:"unknown",cover:t.imageLinks.thumbnail}].concat(Object(s.a)(o.state.library)),error:""})}))})).catch((function(e){console.log(e)}))},o.deleteBook=function(e){console.log(e),o.setState({library:Object(s.a)(o.state.library.filter((function(t,a){return e!==a})))})},o.changeReadStatus=function(e){var t=o.state.library.map((function(t,a){return e===a&&(t.isRead=!t.isRead),t}));o.setState({library:Object(s.a)(t.sort((function(e,t){return e.isRead-t.isRead})))})},o.googleBooks="AIzaSyAESFTdUf9THRX481gN1QQVo-kekK_471k",o.state={library:[{isRead:!1,title:"Learning React",author:"Alex Banks, Eve Porcello",pages:"350",cover:"http://books.google.com/books/content?id=ycTADgAAQBAJ&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"},{isRead:!0,title:"Vue.js Programming by Example",author:"Agus Kurniawan",pages:"200",cover:"http://books.google.com/books/content?id=JDw8DwAAQBAJ&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"}],error:""},o}return Object(l.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement("h1",null,"Library"),n.a.createElement(k,{error:this.state.error,addBook:this.addBook}),n.a.createElement(f,{editFormSubmit:this.editFormSubmit,changeReadStatus:this.changeReadStatus,library:this.state.library,deleteBook:this.deleteBook}))}}]),a}(n.a.Component);i.a.render(n.a.createElement(p,null),document.getElementById("root"))},8:function(e,t,a){e.exports=a(14)}},[[8,1,2]]]);
//# sourceMappingURL=main.3247a05e.chunk.js.map